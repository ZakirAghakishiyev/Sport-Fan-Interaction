<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - İmişli FK</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <div class="imisli-logo">
                    <img src="img/image.png" alt="İmişli FK Logo" style="width: 40px; height: 40px; object-fit: contain; border-radius: 50%;" />
                </div>
                <span>İmişli FK</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="merchandise.html" class="nav-link">Shop</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="container">
            <section class="checkout-section">
                <h1>Checkout</h1>
                <div class="checkout-grid">
                    <div class="checkout-summary">
                        <h2>Order Summary</h2>
                        <div id="summaryItems" class="summary-items"></div>
                        <div class="summary-row"><span>Subtotal</span><span id="summarySubtotal">$0.00</span></div>
                        <div class="summary-row"><span>Shipping</span><span id="summaryShipping">$0.00</span></div>
                        <div class="summary-row total"><span>Total</span><span id="summaryTotal">$0.00</span></div>
                    </div>
                    <div class="checkout-form">
                        <h2>Payment Details</h2>
                        <form id="checkoutForm">
                            <div class="form-group">
                                <label for="fullName">Full Name</label>
                                <input type="text" id="fullName" required />
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email" required />
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <input type="text" id="address" required />
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cardNumber">Card Number</label>
                                    <input type="text" id="cardNumber" inputmode="numeric" maxlength="19" placeholder="1234 5678 9012 3456" required />
                                </div>
                                <div class="form-group">
                                    <label for="expiry">Expiry</label>
                                    <input type="text" id="expiry" inputmode="numeric" maxlength="5" placeholder="MM/YY" required />
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV</label>
                                    <input type="password" id="cvv" inputmode="numeric" maxlength="4" placeholder="***" required />
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary btn-full" id="payBtn">
                                <span class="btn-text"><i class="fas fa-lock"></i> Pay Securely</span>
                            </button>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </main>
    <script>
    // Demo cart loaded from previous page or use fallback
    const CART_KEY = 'imisli_cart_demo';
    const fallbackCart = [
      { id: 1, name: 'İmişli FK Home Jersey', price: 49.99, quantity: 1, imageUrl: 'img/image.png' },
      { id: 2, name: 'İmişli FK Scarf', price: 14.99, quantity: 2, imageUrl: 'img/image.png' }
    ];

    function getCart() {
      try {
        const raw = localStorage.getItem(CART_KEY);
        return raw ? JSON.parse(raw) : fallbackCart;
      } catch { return fallbackCart; }
    }

    function currency(n) { return `$${n.toFixed(2)}`; }

    function renderSummary() {
      const items = getCart();
      const container = document.getElementById('summaryItems');
      container.innerHTML = '';
      let subtotal = 0;
      items.forEach(it => {
        const line = document.createElement('div');
        line.className = 'summary-item';
        const lineTotal = it.price * it.quantity;
        subtotal += lineTotal;
        line.innerHTML = `
          <div class="summary-item-left">
            <img src="${it.imageUrl}" alt="${it.name}" style="width: 48px; height: 48px; object-fit: contain; background: #fff; border-radius: 8px; padding: 4px;" />
            <div>
              <div class="title">${it.name}</div>
              <div class="muted">Qty: ${it.quantity}</div>
            </div>
          </div>
          <div class="summary-item-right">${currency(lineTotal)}</div>
        `;
        container.appendChild(line);
      });
      const shipping = subtotal > 0 ? 4.99 : 0;
      const total = subtotal + shipping;
      document.getElementById('summarySubtotal').textContent = currency(subtotal);
      document.getElementById('summaryShipping').textContent = currency(shipping);
      document.getElementById('summaryTotal').textContent = currency(total);
    }

    function formatCardNumber(value) {
      return value.replace(/\D/g, '').replace(/(.{4})/g, '$1 ').trim();
    }
    function formatExpiry(value) {
      const v = value.replace(/\D/g, '').slice(0, 4);
      if (v.length >= 3) return v.slice(0,2) + '/' + v.slice(2);
      return v;
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderSummary();

      const cardNumber = document.getElementById('cardNumber');
      const expiry = document.getElementById('expiry');
      cardNumber.addEventListener('input', () => cardNumber.value = formatCardNumber(cardNumber.value));
      expiry.addEventListener('input', () => expiry.value = formatExpiry(expiry.value));

      const form = document.getElementById('checkoutForm');
      const payBtn = document.getElementById('payBtn');
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        payBtn.classList.add('loading');
        setTimeout(() => {
          payBtn.classList.remove('loading');
          alert('Payment successful! Thank you for your purchase.');
          localStorage.removeItem(CART_KEY);
          window.location.href = 'dashboard.html';
        }, 1000);
      });
    });
    </script>
</body>
</html> 